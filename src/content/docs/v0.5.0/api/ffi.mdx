{/* This file was auto-generated with "zune-docs" */}

# Foreign Function Interface
`zune.ffi`

---
import { Callout, Tabs } from 'nextra/components'

A library to interact with foreign functions and libraries.

## Properties
### prefix
The recommended prefix for the library file.

Platforms:
- Windows: none
- Linux: `lib`
- macOS: `lib`
```luau tooltips
prefix: string
```
### suffix
The recommended suffix for the library file.

Platforms:
- Windows: `dll`
- Linux: `so`
- macOS: `dylib`
```luau tooltips
suffix: string
```
### types
```luau tooltips
-- @hover: (9,14)[<table> = {
    void: FFIDataType,
    i8: FFIDataType,
    u8: FFIDataType,
    i16: FFIDataType,
    u16: FFIDataType,
    i32: FFIDataType,
    u32: FFIDataType,
    i64: FFIDataType,
    u64: FFIDataType,
    float: FFIDataType,
    double: FFIDataType,
    pointer: FFIPointerType,
    vector2_32: FFIVectorType,
    vector3_32: FFIVectorType, 
}]
types: <table>
```
### null
```luau tooltips
-- @link: (7,17)[../objects/FFIPointer]
null: FFIPointer
```
## Functions
### ptr
```luau tooltips
-- @link: (10,20)[../objects/FFIPointer]
-- @link: (23,33)[../objects/FFIPointer]
ptr(src: FFIPointer): FFIPointer
```
<details open>
<summary>Parameters</summary>
- `src: FFIPointer{:luau}` - The pointer to reference.
</details>
<details>
<summary>Throws</summary>
- Memory Error
</details>

### ptrFromAddress
```luau tooltips
-- @link: (30,40)[../objects/FFIPointer]
ptrFromAddress(src: buffer): FFIPointer
```
<details open>
<summary>Parameters</summary>
- `src: buffer{:luau}` - The address of the pointer.
</details>
<details>
<summary>Throws</summary>
- Memory Error
</details>

### getLuaState
Returns the lua state.
```luau tooltips
-- @link: (36,46)[../objects/FFIPointer]
getLuaState(mainthread: boolean?): FFIPointer
```
<details open>
<summary>Parameters</summary>
- `mainthread: boolean?{:luau}` - Whether to get the main thread or the current thread.
  - default: `false{:luau}`
</details>
<details>
<summary>Throws</summary>
- Memory Error
</details>

### alloc
```luau tooltips
-- @link: (42,52)[../objects/FFIPointer]
alloc(size: number, alignment: number?): FFIPointer
```
<details open>
<summary>Parameters</summary>
- `size: number{:luau}` - The size to allocate.
- `alignment: number?{:luau}` - The alignment to allocate.
  - default: `1{:luau}`
</details>
<details>
<summary>Throws</summary>
- FFI Error
- Memory Error
</details>

### create
```luau tooltips
-- @hover: (14,28)[-- references:
-- @link: (8,19)[../objects/FFIDataType]
-- (1) FFIDataType
-- @link: (8,24)[../objects/FFIStructureType]
-- (2) FFIStructureType
-- @link: (8,20)[../objects/FFIArrayType]
-- (3) FFIArrayType
-- @link: (8,22)[../objects/FFIPointerType]
-- (4) FFIPointerType

export type FFIAnyDataType = FFIDataType | FFIStructureType | FFIArrayType | FFIPointerType]
-- @link: (31,41)[../objects/FFIPointer]
create(type: FFIAnyDataType): FFIPointer
```
<details open>
<summary>Parameters</summary>
- `type: FFIAnyDataType{:luau}` - The data type to allocate.
</details>
<details>
<summary>Throws</summary>
- FFI Error
- Memory Error
</details>

### free
```luau tooltips
-- @link: (11,21)[../objects/FFIPointer]
free(src: FFIPointer): ()
```
<details open>
<summary>Parameters</summary>
- `src: FFIPointer{:luau}` - The pointer to free. If the pointer is static, it must have a known size.
</details>
<details>
<summary>Throws</summary>
- FFI Error
- Memory Error
</details>

### dupe
```luau tooltips
-- @link: (42,52)[../objects/FFIPointer]
-- @link: (20,30)[../objects/FFIPointer]
dupe(src: buffer | FFIPointer | vector): FFIPointer
```
<details open>
<summary>Parameters</summary>
- `src: buffer | FFIPointer | vector{:luau}` - The pointer to duplicate. If the source is a static pointer, it must have a known size.
</details>
<details>
<summary>Throws</summary>
- Memory Error
</details>

### tagName
```luau tooltips
tagName(tag: number): string?
```
<details open>
<summary>Parameters</summary>
- `tag: number{:luau}` - The tag id to get the name of.
</details>

### struct
Creates a structure data type.
- The order of the fields is the number index of the field table.
- There cannot be multiple fields in the same field table.
- Multiple fields with the same field name is not allowed.
```luau tooltips
-- @hover: (28,42)[-- references:
-- @link: (8,19)[../objects/FFIDataType]
-- (1) FFIDataType
-- @link: (8,24)[../objects/FFIStructureType]
-- (2) FFIStructureType
-- @link: (8,20)[../objects/FFIArrayType]
-- (3) FFIArrayType
-- @link: (8,22)[../objects/FFIPointerType]
-- (4) FFIPointerType

export type FFIAnyDataType = FFIDataType | FFIStructureType | FFIArrayType | FFIPointerType]
-- @link: (47,63)[../objects/FFIStructureType]
struct(fields: {{[string]: FFIAnyDataType}}): FFIStructureType
```
<details open>
<summary>Parameters</summary>
- `fields: {{ [string]: FFIAnyDataType }}{:luau}` - The fields of the structure.
</details>
<details>
<summary>Throws</summary>
- FFI Error
- Memory Error
</details>

### fn
```luau tooltips
-- @hover: (16,36)[-- references:
-- @link: (8,19)[../objects/FFIDataType]
-- (1) FFIDataType
-- @link: (8,24)[../objects/FFIStructureType]
-- (2) FFIStructureType
-- @link: (8,20)[../objects/FFIArrayType]
-- (3) FFIArrayType
-- @link: (8,22)[../objects/FFIPointerType]
-- (4) FFIPointerType

export type FFIAnyDataType = FFIDataType | FFIStructureType | FFIArrayType | FFIPointerType

export type FFIFunctionDefintion = {
    returns: FFIAnyDataType,
    args: {FFIAnyDataType}
}]
-- @link: (46,56)[../objects/FFIPointer]
fn(definition: FFIFunctionDefintion, srcPtr: FFIPointer): ((...any) -> any)
```
<details open>
<summary>Parameters</summary>
- `definition: FFIFunctionDefintion{:luau}` - The function definition.
  - `returns: FFIAnyDataType{:luau}` - The return type of the function.
  - `args: {FFIAnyDataType}{:luau}` - The argument types of the function.
- `srcPtr: FFIPointer{:luau}` - The pointer to the function.
</details>
<details>
<summary>Throws</summary>
- FFI Error
- Memory Error
</details>

### closure
```luau tooltips
-- @hover: (21,41)[-- references:
-- @link: (8,19)[../objects/FFIDataType]
-- (1) FFIDataType
-- @link: (8,24)[../objects/FFIStructureType]
-- (2) FFIStructureType
-- @link: (8,20)[../objects/FFIArrayType]
-- (3) FFIArrayType
-- @link: (8,22)[../objects/FFIPointerType]
-- (4) FFIPointerType

export type FFIAnyDataType = FFIDataType | FFIStructureType | FFIArrayType | FFIPointerType

export type FFIFunctionDefintion = {
    returns: FFIAnyDataType,
    args: {FFIAnyDataType}
}]
-- @link: (70,80)[../objects/FFIPointer]
closure(definition: FFIFunctionDefintion, handler: (...any) -> any): FFIPointer
```
<details open>
<summary>Parameters</summary>
- `definition: FFIFunctionDefintion{:luau}` - The function definition.
  - `returns: FFIAnyDataType{:luau}` - The return type of the function.
  - `args: {FFIAnyDataType}{:luau}` - The argument types of the function.
- `handler: (...any) -> any{:luau}` - The lua function to call.
</details>
<details>
<summary>Throws</summary>
- FFI Error
- Memory Error
</details>

### dlopen
```luau tooltips
-- @hover: (68,78)[-- references:
-- @link: (8,18)[../objects/FFIPointer]
-- (1) FFIPointer

export type FFILibrary = {
    getSymbol: (self: FFILibrary, symbol: string) -> FFIPointer?,
    [string]: (...any) -> any, 
}]
-- @hover: (44,64)[-- references:
-- @link: (8,19)[../objects/FFIDataType]
-- (1) FFIDataType
-- @link: (8,24)[../objects/FFIStructureType]
-- (2) FFIStructureType
-- @link: (8,20)[../objects/FFIArrayType]
-- (3) FFIArrayType
-- @link: (8,22)[../objects/FFIPointerType]
-- (4) FFIPointerType

export type FFIAnyDataType = FFIDataType | FFIStructureType | FFIArrayType | FFIPointerType

export type FFIFunctionDefintion = {
    returns: FFIAnyDataType,
    args: {FFIAnyDataType}
}]
dlopen(path: string, functions: {[string]: FFIFunctionDefintion}): FFILibrary
```
<details open>
<summary>Parameters</summary>
- `path: string{:luau}` - The path to the library.
- `functions: { [string]: FFIFunctionDefintion }{:luau}` - The symbols to load from the library.
</details>
<details>
<summary>Throws</summary>
- FFI Error
- Memory Error
</details>

## Namespaces
### c
---
<h4 className="x:text-slate-900 x:dark:text-slate-100 x:mt-8 x:text-xl"><u>`FUNCTIONS`</u></h4>
#### compile
```luau tooltips
-- @hover: (30,47)[-- references:
-- @link: (8,18)[../objects/FFIPointer]
-- (1) FFIPointer

export type FFICompileOptions = {
    options: string?,
    files: {string}?,
    libraries: {string}?,
    library_paths: {string}?,
    includes: {string}?,
    sysincludes: {string}?,
    symbols: {
        [string]: FFIPointer
    }?, 
}]
-- @link: (51,62)[../objects/FFICompiled]
c.compile(src: string, opts: FFICompileOptions?): FFICompiled
```
<details open>
<summary>Parameters</summary>
- `src: string{:luau}` - The C source code to compile.
- `opts: FFICompileOptions?{:luau}` - The options for the compilation.
  - `options: string?{:luau}` - The compiler options to use.
  - `files: {string}?{:luau}` - The files to include in the compilation.
  - `libraries: {string}?{:luau}` - The libraries to link against.
  - `library_paths: {string}?{:luau}` - The library paths to use.
  - `includes: {string}?{:luau}` - The include directories to use.
  - `sysincludes: {string}?{:luau}` - The system include directories to use.
  - `symbols: {[string]: FFIPointer}?{:luau}` - The symbols to define.
</details>
